# simpletfjob

## 简介

一个简单的模板替换工具,提供一些与tensorflow分布式相关的模板变量,
,用户可以用这些模板变量编写Job模板文件,并且使用该工具将其转换为
Kubernetes可以识别的Job文件。

## 场景

如果想要使用Tensorflow Estimator API进行分布式训练的话,环境变量一般要求按
如下格式配置

```json
{
  "cluster": {
    "chief": ["10.0.0.4:2222"],
    "ps": ["10.0.0.6:2222"],
    "worker": ["10.0.0.5:2222"]
  },
  "task": {
    "index": 0,
    "type": "ps"
  }
}
```

将容器编排成Job的情况下,每个Job都需要配置不同的环境变量,逐一手动配置
的话相当麻烦,所以这里提供了一些模板变量,工具可以将这些模板变量自动转换
成相应的值。

## 提供的模板的变量

| 变量        | 含义    | 
| --------   | -----   | 
| {{.type}}  | 集群中担任角色,ps或者worker      |  
| {{.index}} | 在集群同类中的编号,从0开始      | 
| {{.host}}  | 物理机的主机名,比如h85     |
| {{.TF_CONFIG}}|  ![little config](https://user-images.githubusercontent.com/23725000/56472553-7dcb7780-6492-11e9-89e3-3c746b91dc6b.png)     |


其中`{{.TF_CONFIG}}`会随着集群中每台机器角色的变化
而发生变化。


比如如下的模板：

```yaml

```

未完待续...